<!doctype html>
<script
	type=module
>
	let
	print
	=
	console
	.log
	
	let
	sleep
	=
	function(
		seconds
	){
		return(
			new
			Promise(
				function(
					resolve
				){
					setTimeout(
						function(){
							resolve()
						},
						
						seconds
						*
						1000
					)
				}
			)
		)
	}
	
	document
	.body
	.onkeydown
	=
	function(){
		print(
			'hi!'
		)
	}
	
	print(
		'blocking thread (but not events!)'
	)
	
	await
	sleep(
		2
	)
	
	print(
		'main thread released!'
	)
	
	let
	sleep_2
	=
	function(
		seconds
	){
		let
		start_time
		=
		Date.now()
		
		while(
				Date.now()
				-
				start_time
			<
				seconds
				*
				1000
		);
	}
	
	document
	.body
	.onkeydown
	=
	function(){
		print(
			'blocked...'
		)
	}
	
	print(
		'Blocking everything (even events)'
	)
	
	sleep_2(
		2
	)
	
	setTimeout(
		function(){
			print(
				'no longer accepting events!'
			)
			
			document
			.body
			.onkeydown
			=
			function(){}
		}
	)
	
	print(
		'Thread released!'
	)
</script>